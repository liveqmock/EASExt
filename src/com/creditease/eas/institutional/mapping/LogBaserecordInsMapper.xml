<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.creditease.eas.institutional.dao.LogBaserecordInsMapper" >
  <resultMap id="BaseResultMap" type="com.creditease.eas.institutional.bean.LogBaserecordIns" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Dec 26 09:35:35 CST 2013.
    -->
    <result column="ID" property="id" jdbcType="DECIMAL" />
    <result column="FUNC_NAME" property="funcName" jdbcType="VARCHAR" />
    <result column="OPERATETYPE" property="operatetype" jdbcType="DECIMAL" />
    <result column="EXCEPTIONINFO" property="exceptioninfo" jdbcType="VARCHAR" />
    <result column="IFSUCCESS" property="ifsuccess" jdbcType="DECIMAL" />
    <result column="COUNT" property="count" jdbcType="DECIMAL" />
    <result column="RECDATE" property="recdate" jdbcType="TIMESTAMP" />
    <result column="TYPEID" property="typeid" jdbcType="DECIMAL" />
    <result column="EXCEPTCODE" property="exceptcode" jdbcType="DECIMAL" />
    <result column="UPDATEDATE" property="updatedate" jdbcType="TIMESTAMP" />
  </resultMap>
  <insert id="insert" parameterType="com.creditease.eas.institutional.bean.LogBaserecordIns" >
<!--      <selectKey resultType="long" keyProperty="id" order="BEFORE"> -->
<!--   		select T_LOG_BASE_SEQ_SMP.NEXTVAL from dual-->
<!--	 </selectKey>-->
    insert into T_LOG_BASERECORD_INS (ID, FUNC_NAME, OPERATETYPE, 
      EXCEPTIONINFO, IFSUCCESS, COUNT, 
      RECDATE, TYPEID, EXCEPTCODE, 
      UPDATEDATE)
    values (#{id,jdbcType=DECIMAL}, #{funcName,jdbcType=VARCHAR}, #{operatetype,jdbcType=DECIMAL}, 
      #{exceptioninfo,jdbcType=VARCHAR}, #{ifsuccess,jdbcType=DECIMAL}, #{count,jdbcType=DECIMAL}, 
      #{recdate,jdbcType=TIMESTAMP}, #{typeid,jdbcType=DECIMAL}, #{exceptcode,jdbcType=DECIMAL}, 
      #{updatedate,jdbcType=TIMESTAMP})
  </insert>
  <insert id="insertSelective" parameterType="com.creditease.eas.institutional.bean.LogBaserecordIns" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Dec 26 09:35:35 CST 2013.
    -->
    insert into T_LOG_BASERECORD_INS
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        ID,
      </if>
      <if test="funcName != null" >
        FUNC_NAME,
      </if>
      <if test="operatetype != null" >
        OPERATETYPE,
      </if>
      <if test="exceptioninfo != null" >
        EXCEPTIONINFO,
      </if>
      <if test="ifsuccess != null" >
        IFSUCCESS,
      </if>
      <if test="count != null" >
        COUNT,
      </if>
      <if test="recdate != null" >
        RECDATE,
      </if>
      <if test="typeid != null" >
        TYPEID,
      </if>
      <if test="exceptcode != null" >
        EXCEPTCODE,
      </if>
      <if test="updatedate != null" >
        UPDATEDATE,
      </if>
      <if test="exp1 != null" >
        EXP1,
      </if>
      <if test="exp2 != null" >
        EXP2,
      </if>
      <if test="exp3 != null" >
        EXP3,
      </if>
      <if test="exp4 != null" >
        EXP4,
      </if>
      <if test="exp5 != null" >
        EXP5,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=DECIMAL},
      </if>
      <if test="funcName != null" >
        #{funcName,jdbcType=VARCHAR},
      </if>
      <if test="operatetype != null" >
        #{operatetype,jdbcType=DECIMAL},
      </if>
      <if test="exceptioninfo != null" >
        #{exceptioninfo,jdbcType=VARCHAR},
      </if>
      <if test="ifsuccess != null" >
        #{ifsuccess,jdbcType=DECIMAL},
      </if>
      <if test="count != null" >
        #{count,jdbcType=DECIMAL},
      </if>
      <if test="recdate != null" >
        #{recdate,jdbcType=TIMESTAMP},
      </if>
      <if test="typeid != null" >
        #{typeid,jdbcType=DECIMAL},
      </if>
      <if test="exceptcode != null" >
        #{exceptcode,jdbcType=DECIMAL},
      </if>
      <if test="updatedate != null" >
        #{updatedate,jdbcType=TIMESTAMP},
      </if>
      <if test="exp1 != null" >
        #{exp1,jdbcType=OTHER},
      </if>
      <if test="exp2 != null" >
        #{exp2,jdbcType=OTHER},
      </if>
      <if test="exp3 != null" >
        #{exp3,jdbcType=OTHER},
      </if>
      <if test="exp4 != null" >
        #{exp4,jdbcType=OTHER},
      </if>
      <if test="exp5 != null" >
        #{exp5,jdbcType=OTHER},
      </if>
    </trim>
  </insert>
  <!-- 查询日志记录里面最大的时间
    	只查询成功的日志，能从上次成功开始查，查询到最后一次成功推送数据日期
     -->
   <select id="selectLastMaxRecordTime" resultType="map" parameterType="map">
   	   select max(t.RECDATE) as recdate from T_LOG_BASERECORD_INS t where t.IFSUCCESS=1 and t.TYPEID = #{typeId}
   </select>
</mapper>