<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.creditease.eas.hrnew.dao.BaseLogRecordSMPMapper" >
  <resultMap id="BaseResultMap" type="com.creditease.eas.hrnew.bean.BaseLogRecordSMP" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 03 16:06:54 CST 2013.
    -->
    <id column="ID" property="id" jdbcType="DECIMAL" />
    <result column="FUNC_NAME" property="funcName" jdbcType="VARCHAR" />
    <result column="OPERATETYPE" property="operatetype" jdbcType="DECIMAL" />
    <result column="EXCEPTIONINFO" property="exceptioninfo" jdbcType="VARCHAR" />
    <result column="IFSUCCESS" property="ifsuccess" jdbcType="DECIMAL" />
    <result column="COUNT" property="count" jdbcType="DECIMAL" />
    <result column="RECDATE" property="recdate" jdbcType="TIMESTAMP" />
    <result column="TYPEID" property="typeid" jdbcType="DECIMAL" />
    <result column="EXCEPTCODE" property="exceptcode" jdbcType="DECIMAL" />
    <result column="UPDATEDATE" property="updatedate" jdbcType="TIMESTAMP" />
 
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 03 16:06:54 CST 2013.
    -->
    ID, FUNC_NAME, OPERATETYPE, EXCEPTIONINFO, IFSUCCESS, COUNT, RECDATE, TYPEID, EXCEPTCODE, 
    UPDATEDATE, EXP1, EXP2, EXP3, EXP4, EXP5
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 03 16:06:54 CST 2013.
    -->
    select 
    <include refid="Base_Column_List" />
    from T_LOG_BASERECORD_SMP
    where ID = #{id,jdbcType=DECIMAL}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 03 16:06:54 CST 2013.
    -->
    delete from T_LOG_BASERECORD_SMP
    where ID = #{id,jdbcType=DECIMAL}
  </delete>
  <insert id="insert" parameterType="com.creditease.eas.hrnew.bean.BaseLogRecordSMP" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 03 16:06:54 CST 2013.
    -->
    <selectKey resultType="long" keyProperty="id" order="BEFORE"> 
   		select T_LOG_BASE_SEQ_SMP.NEXTVAL from dual
	 </selectKey>
    insert into T_LOG_BASERECORD_SMP (ID, FUNC_NAME, OPERATETYPE, 
      EXCEPTIONINFO, IFSUCCESS, COUNT, 
      RECDATE, TYPEID, EXCEPTCODE, 
      UPDATEDATE)
    values (#{id,jdbcType=DECIMAL}, #{funcName,jdbcType=VARCHAR}, #{operatetype,jdbcType=DECIMAL}, 
      #{exceptioninfo,jdbcType=VARCHAR}, #{ifsuccess,jdbcType=DECIMAL}, #{count,jdbcType=DECIMAL}, 
      #{recdate,jdbcType=TIMESTAMP}, #{typeid,jdbcType=DECIMAL}, #{exceptcode,jdbcType=DECIMAL}, 
      #{updatedate,jdbcType=TIMESTAMP})
  </insert>
  <insert id="insertSelective" parameterType="com.creditease.eas.hrnew.bean.BaseLogRecordSMP" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 03 16:06:54 CST 2013.
    -->
    insert into T_LOG_BASERECORD_SMP
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        ID,
      </if>
      <if test="funcName != null" >
        FUNC_NAME,
      </if>
      <if test="operatetype != null" >
        OPERATETYPE,
      </if>
      <if test="exceptioninfo != null" >
        EXCEPTIONINFO,
      </if>
      <if test="ifsuccess != null" >
        IFSUCCESS,
      </if>
      <if test="count != null" >
        COUNT,
      </if>
      <if test="recdate != null" >
        RECDATE,
      </if>
      <if test="typeid != null" >
        TYPEID,
      </if>
      <if test="exceptcode != null" >
        EXCEPTCODE,
      </if>
      <if test="updatedate != null" >
        UPDATEDATE,
      </if>
      <if test="exp1 != null" >
        EXP1,
      </if>
      <if test="exp2 != null" >
        EXP2,
      </if>
      <if test="exp3 != null" >
        EXP3,
      </if>
      <if test="exp4 != null" >
        EXP4,
      </if>
      <if test="exp5 != null" >
        EXP5,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=DECIMAL},
      </if>
      <if test="funcName != null" >
        #{funcName,jdbcType=VARCHAR},
      </if>
      <if test="operatetype != null" >
        #{operatetype,jdbcType=DECIMAL},
      </if>
      <if test="exceptioninfo != null" >
        #{exceptioninfo,jdbcType=VARCHAR},
      </if>
      <if test="ifsuccess != null" >
        #{ifsuccess,jdbcType=DECIMAL},
      </if>
      <if test="count != null" >
        #{count,jdbcType=DECIMAL},
      </if>
      <if test="recdate != null" >
        #{recdate,jdbcType=TIMESTAMP},
      </if>
      <if test="typeid != null" >
        #{typeid,jdbcType=DECIMAL},
      </if>
      <if test="exceptcode != null" >
        #{exceptcode,jdbcType=DECIMAL},
      </if>
      <if test="updatedate != null" >
        #{updatedate,jdbcType=TIMESTAMP},
      </if>
      <if test="exp1 != null" >
        #{exp1,jdbcType=OTHER},
      </if>
      <if test="exp2 != null" >
        #{exp2,jdbcType=OTHER},
      </if>
      <if test="exp3 != null" >
        #{exp3,jdbcType=OTHER},
      </if>
      <if test="exp4 != null" >
        #{exp4,jdbcType=OTHER},
      </if>
      <if test="exp5 != null" >
        #{exp5,jdbcType=OTHER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.creditease.eas.hrnew.bean.BaseLogRecordSMP" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 03 16:06:54 CST 2013.
    -->
    update T_LOG_BASERECORD_SMP
    <set >
      <if test="funcName != null" >
        FUNC_NAME = #{funcName,jdbcType=VARCHAR},
      </if>
      <if test="operatetype != null" >
        OPERATETYPE = #{operatetype,jdbcType=DECIMAL},
      </if>
      <if test="exceptioninfo != null" >
        EXCEPTIONINFO = #{exceptioninfo,jdbcType=VARCHAR},
      </if>
      <if test="ifsuccess != null" >
        IFSUCCESS = #{ifsuccess,jdbcType=DECIMAL},
      </if>
      <if test="count != null" >
        COUNT = #{count,jdbcType=DECIMAL},
      </if>
      <if test="recdate != null" >
        RECDATE = #{recdate,jdbcType=TIMESTAMP},
      </if>
      <if test="typeid != null" >
        TYPEID = #{typeid,jdbcType=DECIMAL},
      </if>
      <if test="exceptcode != null" >
        EXCEPTCODE = #{exceptcode,jdbcType=DECIMAL},
      </if>
      <if test="updatedate != null" >
        UPDATEDATE = #{updatedate,jdbcType=TIMESTAMP},
      </if>
      <if test="exp1 != null" >
        EXP1 = #{exp1,jdbcType=OTHER},
      </if>
      <if test="exp2 != null" >
        EXP2 = #{exp2,jdbcType=OTHER},
      </if>
      <if test="exp3 != null" >
        EXP3 = #{exp3,jdbcType=OTHER},
      </if>
      <if test="exp4 != null" >
        EXP4 = #{exp4,jdbcType=OTHER},
      </if>
      <if test="exp5 != null" >
        EXP5 = #{exp5,jdbcType=OTHER},
      </if>
    </set>
    where ID = #{id,jdbcType=DECIMAL}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.creditease.eas.hrnew.bean.BaseLogRecordSMP" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 03 16:06:54 CST 2013.
    -->
    update T_LOG_BASERECORD_SMP
    set FUNC_NAME = #{funcName,jdbcType=VARCHAR},
      OPERATETYPE = #{operatetype,jdbcType=DECIMAL},
      EXCEPTIONINFO = #{exceptioninfo,jdbcType=VARCHAR},
      IFSUCCESS = #{ifsuccess,jdbcType=DECIMAL},
      COUNT = #{count,jdbcType=DECIMAL},
      RECDATE = #{recdate,jdbcType=TIMESTAMP},
      TYPEID = #{typeid,jdbcType=DECIMAL},
      EXCEPTCODE = #{exceptcode,jdbcType=DECIMAL},
      UPDATEDATE = #{updatedate,jdbcType=TIMESTAMP},
      EXP1 = #{exp1,jdbcType=OTHER},
      EXP2 = #{exp2,jdbcType=OTHER},
      EXP3 = #{exp3,jdbcType=OTHER},
      EXP4 = #{exp4,jdbcType=OTHER},
      EXP5 = #{exp5,jdbcType=OTHER}
    where ID = #{id,jdbcType=DECIMAL}
  </update>
  
     <!-- 查询日志记录里面最大的时间
    	只查询成功的日志，能从上次成功开始查，查询到下次成功
     -->
    <select id="selectLastMaxRecordTime" resultType="map" parameterType="map">
   	    select max(t.RECDATE) as recdate from t_log_baserecord_smp t  where t.IFSUCCESS=1 and t.TYPEID = #{typeid}
   </select>
</mapper>